(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{83:function(e,t,n){},84:function(e,t,n){},94:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(11),o=n.n(a),i=(n(83),n.p,n(84),n(32)),s=n.n(i),u=n(46),l=n(26),j=n(16),d=n(125),b=n(129),f=n(130),O=n(131),m=n(132),h=n(133),x=n(134),p=n(135),v=n(136),g=n(96),y=n(68),k=n.n(y),S=n(69),C=n.n(S),I=n(3);function N(e){e.key,e.id;var t=e.product,n=e.addItem,r=e.removeItem,a=e.editItem,o=e.getIndexOfItem,i=e.isAlreadyInCart,s=Object(c.useState)(!1),u=Object(j.a)(s,2),l=u[0],y=u[1],S=Object(c.useState)(1),N=Object(j.a)(S,2),_=N[0],w=N[1];Object(c.useEffect)((function(){var e=i(t);y(e.inside),w(e.count)}),[]);var E=function(){l?(y(!1),w(1),r(t)):(y(!0),n(t,_))};return Object(I.jsx)(d.a,{item:!0,xs:12,sm:4,children:Object(I.jsx)(b.a,{children:Object(I.jsxs)(f.a,{children:[Object(I.jsx)(O.a,{component:"img",height:"250",image:t.image,title:t.name}),Object(I.jsxs)(m.a,{children:[Object(I.jsx)(h.a,{gutterBottom:!0,variant:"h5",component:"h3",children:t.name}),Object(I.jsx)(h.a,{variant:"body1",color:"textSecondary",component:"span",children:t.category}),Object(I.jsx)(h.a,{variant:"body2",color:"textSecondary",component:"p",children:t.description}),Object(I.jsxs)(h.a,{variant:"subtitle2",color:"textSecondary",component:"span",children:[t.price," \u20ac"]})]}),Object(I.jsxs)(x.a,{children:[l?Object(I.jsx)(p.a,{color:"secondary",onClick:E,children:Object(I.jsx)(C.a,{})}):Object(I.jsx)(p.a,{color:"primary",onClick:E,children:Object(I.jsx)(k.a,{})}),l&&Object(I.jsxs)(v.a,{size:"small",children:[l&&Object(I.jsx)(g.a,{disabled:!0,children:_}),Object(I.jsx)(g.a,{onClick:function(){if(1!==_){var e=_-1,n=o(t)>0?o(t):0;w(e),console.log(n,"Decrement"),a(n,e)}},children:"-"}),Object(I.jsx)(g.a,{onClick:function(){var e=_+1,n=o(t)>0?o(t):0;w(e),console.log(n,"Increment"),a(n,e)},children:"+"})]})]})]})})})}var _=n(142),w=n(141),E=n(137),F=n(138),J=n(139),W=n(140),T=n(70),A=n.n(T),B=n(71),D=n.n(B),P=n(9);function L(e){var t=e.count,n=void 0===t?0:t,c=Object(P.f)();return Object(I.jsx)(E.a,{position:"static",children:Object(I.jsxs)(F.a,{children:[Object(I.jsx)(J.a,{onClick:function(){return c.push("/")},children:Object(I.jsx)(A.a,{})}),Object(I.jsx)(J.a,{onClick:function(){return c.push("/cart")},children:Object(I.jsx)(W.a,{badgeContent:n,color:"secondary",children:Object(I.jsx)(D.a,{})})})]})})}var z=Object(w.a)((function(e){return{root:{flexGrow:1,margin:"2rem auto"},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary}}}));function G(){var e=z(),t=Object(c.useState)([]),n=Object(j.a)(t,2),r=n[0],a=n[1],o=Object(c.useState)([]),i=Object(j.a)(o,2),b=i[0],f=i[1];Object(c.useEffect)((function(){v(),g()}),[]),Object(c.useEffect)((function(){b.length>0&&localStorage.setItem("products",JSON.stringify(b))}),[b]);var O=function(e,t){var n={product:e,count:t};f((function(e){return[].concat(Object(l.a)(e),[n])}))},m=function(e){f(b.filter((function(t){return t.product._id!==e._id})))},h=function(e,t){if(b.length>0){var n=Object(l.a)(b);n[e].count=t,f(n)}},x=function(e){return b.findIndex((function(t,n){var c=e._id;if(t.product._id===c)return console.log(n),n}))},p=function(e){var t=!1,n=1;return b.forEach((function(c){c.product._id===e._id&&(t=!0,n=c.count)})),{inside:t,count:n}},v=function(){var e=Object(u.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:80/products");case 2:if(!(t=e.sent).ok){e.next=11;break}return e.next=6,t.json();case 6:n=e.sent,a(n.products),console.log(n),e.next=12;break;case 11:console.error(t.status);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=JSON.parse(localStorage.getItem("products"));e&&f(e)};return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(L,{count:(null===b||void 0===b?void 0:b.length)||0}),Object(I.jsx)(_.a,{className:e.root,children:Object(I.jsx)(d.a,{container:!0,spacing:3,children:r.map((function(e){return Object(I.jsx)(N,{product:e,addItem:O,removeItem:m,editItem:h,getIndexOfItem:x,isAlreadyInCart:p},e._id)}))})})]})}var M=n(72),X=n(74),q=Object(w.a)({root:{display:"flex",height:"150px",width:"100%",margin:".5rem auto",justifyContent:"space-between"},img:{maxWidth:"150px",minWidth:"150px",objectFit:"cover"},div:{display:"flex",flexDirection:"column",margin:"auto 1rem"},buttons:{margin:"auto 2rem"}});function H(e){var t=e.product,n=e.count,c=e.increment,r=e.remove,a=e.decrement,o=q();return Object(I.jsxs)(X.a,{className:o.root,children:[Object(I.jsx)("img",{className:o.img,src:t.image}),Object(I.jsxs)("div",{className:o.div,children:[Object(I.jsx)(h.a,{component:"h3",variant:"h6",children:t.name}),Object(I.jsx)(h.a,{component:"span",variant:"body2",children:t.category}),Object(I.jsx)(h.a,{component:"p",variant:"subtitle2",children:t.description}),Object(I.jsxs)(h.a,{component:"p",variant:"subtitle2",children:["Count: ",n]})]}),Object(I.jsx)("div",{className:o.buttons,children:Object(I.jsxs)(v.a,{children:[Object(I.jsx)(g.a,{onClick:function(){return a(t)},children:"-"}),Object(I.jsx)(g.a,{onClick:function(){return c(t)},children:"+"}),Object(I.jsx)(g.a,{color:"secondary",onClick:function(){return r(t)},children:"X"})]})})]})}var K=Object(w.a)({root:{margin:"2rem auto",display:"flex",flexDirection:"column"}});function Q(){var e=K(),t=Object(P.f)(),n=Object(c.useState)([]),r=Object(j.a)(n,2),a=r[0],o=r[1];Object(c.useEffect)((function(){i()}),[]),Object(c.useEffect)((function(){localStorage.setItem("products",JSON.stringify(a))}),[a]);var i=function(){var e=JSON.parse(localStorage.getItem("products"));o(e)},s=function(e){for(var t=0;t<a.length;t++){if(a[t].product._id===e._id){var n=Object(l.a)(a);console.log(n[t]),n[t].count++,o(n);break}}},u=function(e){for(var t=0;t<a.length;t++){if(a[t].product._id===e._id){var n=Object(l.a)(a);n[t].count--,o(n);break}}},d=function(e){for(var t=0;t<a.length;t++){if(a[t].product._id===e._id){var n=Object(l.a)(a);n.splice(t,1),o(n);break}}};return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(L,{count:0}),Object(I.jsxs)(_.a,{className:e.root,children:[a.length>0&&a.map((function(e){return Object(I.jsx)(H,{product:e.product,count:e.count,increment:s,decrement:u,remove:d})})),a.length>0&&Object(I.jsx)(g.a,{onClick:function(){t.push({pathname:"/pay",state:{products:a}})},fullWidth:!1,variant:"contained",color:"primary",children:"Buy food!"})]})]})}var R=n(143),U=Object(w.a)({form:{margin:"2rem 5vw",padding:"2rem"},field:{margin:".5rem auto"}});function V(e){e.products;var t=U(),n=Object(P.f)(),r=Object(c.useState)(""),a=Object(j.a)(r,2),o=a[0],i=a[1],l=Object(c.useState)(""),d=Object(j.a)(l,2),b=d[0],f=d[1],O=Object(c.useState)(""),m=Object(j.a)(O,2),h=m[0],x=m[1],p=Object(c.useState)(""),v=Object(j.a)(p,2),y=v[0],k=v[1];Object(c.useEffect)((function(){console.log(n.location.state)}),[]);var S=function(){var e=Object(u.a)(s.a.mark((function e(){var t,c,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.location.state.products,e.next=3,fetch("",{method:"POST",body:JSON.stringify(t)});case 3:if(!(c=e.sent).ok){e.next=12;break}return e.next=7,c.json();case 7:r=e.sent,console.log(r),setTimeout((function(){n.push("/")}),1500),e.next=13;break;case 12:console.error(c.status);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(I.jsx)(I.Fragment,{children:Object(I.jsx)(_.a,{children:Object(I.jsx)(X.a,{children:Object(I.jsxs)("form",{className:t.form,children:[Object(I.jsx)(R.a,{className:t.field,fullWidth:!0,variant:"outlined",label:"Name",onChange:function(e){return i(e.target.value)},value:o}),Object(I.jsx)(R.a,{className:t.field,fullWidth:!0,variant:"outlined",label:"Email",onChange:function(e){return f(e.target.value)},value:b}),Object(I.jsx)(R.a,{className:t.field,fullWidth:!0,variant:"outlined",label:"Telephone",onChange:function(e){return x(e.target.value)},value:h}),Object(I.jsx)(R.a,{className:t.field,fullWidth:!0,variant:"outlined",label:"Other",multiline:!0,rows:10,onChange:function(e){return k(e.target.value)},value:y}),Object(I.jsx)(g.a,{onClick:function(){return S()},color:"primary",variant:"contained",children:"Submit"})]})})})})}var Y=function(){return Object(I.jsx)(M.a,{children:Object(I.jsx)("div",{className:"App",children:Object(I.jsxs)(P.c,{children:[Object(I.jsx)(P.a,{exact:!0,path:"/",component:function(){return Object(I.jsx)(G,{})}}),Object(I.jsx)(P.a,{path:"/cart",component:function(){return Object(I.jsx)(Q,{})}}),Object(I.jsx)(P.a,{path:"/pay",component:function(){return Object(I.jsx)(V,{})}})]})})})},Z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,145)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),c(e),r(e),a(e),o(e)}))};o.a.render(Object(I.jsx)(r.a.StrictMode,{children:Object(I.jsx)(Y,{})}),document.getElementById("root")),Z()}},[[94,1,2]]]);
//# sourceMappingURL=main.2049cc53.chunk.js.map